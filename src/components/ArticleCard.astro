---
import type { CollectionEntry } from 'astro:content';

interface Props {
  article: CollectionEntry<'articles'>;
}

const { article } = Astro.props;
const { title, description, pubDate, category, readingTime } = article.data;

const categoryLabels: Record<string, { label: string; color: string }> = {
  news: { label: 'Notícia', color: 'bg-blue-100 text-blue-800' },
  paper: { label: 'Paper', color: 'bg-purple-100 text-purple-800' },
  repo: { label: 'Repositório', color: 'bg-green-100 text-green-800' },
  analysis: { label: 'Análise', color: 'bg-orange-100 text-orange-800' },
};

const cat = categoryLabels[category] || categoryLabels.news;

const formattedDate = pubDate.toLocaleDateString('pt-BR', {
  day: '2-digit',
  month: 'short',
});
---

<a href={`/artigos/${article.slug}`} class="block group">
  <article class="bg-white rounded-xl border border-gray-200 p-6 hover:shadow-lg hover:border-primary/30 transition-all duration-200">
    <div class="flex items-center gap-3 mb-3">
      <span class={`px-2 py-0.5 rounded text-xs font-medium ${cat.color}`}>
        {cat.label}
      </span>
      <span class="text-gray-400 text-sm">{formattedDate}</span>
      {readingTime && (
        <span class="text-gray-400 text-sm">• {readingTime}</span>
      )}
    </div>

    <h3 class="text-lg font-semibold text-gray-900 group-hover:text-primary transition mb-2 line-clamp-2">
      {title}
    </h3>

    <p class="text-gray-600 text-sm line-clamp-2">
      {description}
    </p>

    <div class="mt-4 text-primary text-sm font-medium group-hover:translate-x-1 transition-transform inline-flex items-center gap-1">
      Ler mais <span>→</span>
    </div>
  </article>
</a>
